<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Gbêkê Booking - Résidences, Salles, Hôtels & Événements à Bouaké</title>
<style>
  body {
    font-family: 'Inter', Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #f5f5f5;
  }

.header {
    background-color: #007bff;
    color: white;
    padding: 20px;
    text-align: center;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    border-bottom-left-radius: 8px;
    border-bottom-right-radius: 8px;
  }

.header h1 {
    margin: 0;
}

.nav {
    display: flex;
    justify-content: center;
    background-color: #333;
    border-radius: 8px;
    margin-top: 10px;
    flex-wrap: wrap; /* Pour la réactivité */
  }

.nav a {
    color: white;
    padding: 14px 20px;
    text-decoration: none;
    transition: background 0.3s;
    border-radius: 8px;
    cursor: pointer; /* Indique que ce sont des éléments cliquables */
  }
.nav a:hover {
    background-color: #555;
  }
.nav a.active {
    background-color: #0056b3;
    font-weight: bold;
  }

.main {
    padding: 30px;
    max-width: 1200px;
    margin: 20px auto;
    background-color: white;
    border-radius: 12px;
    box-shadow: 0 0 20px rgba(0, 0, 0, 0.05);
  }

.section {
    margin-bottom: 40px;
  }

.filters {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    padding: 20px;
    background-color: #e9ecef;
    border-radius: 8px;
    margin-bottom: 30px;
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);
  }

.filter-group label {
    display: block;
    margin-bottom: 5px;
    font-weight: bold;
    color: #333;
    font-size: 14px;
  }

.filter-group select,
.filter-group input {
    width: 100%;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 6px;
    box-sizing: border-box;
    font-size: 14px;
    transition: border-color 0.3s;
  }

.filter-group select:focus,
.filter-group input:focus {
    border-color: #007bff;
    outline: none;
  }

#listings {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 30px;
  }

.card {
    background-color: #fff;
    border: 1px solid #ddd;
    border-radius: 10px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    overflow: hidden;
    transition: transform 0.3s, box-shadow 0.3s;
}

.card:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1);
}

/* Styles pour l'album photo (carousel) */
.image-gallery-container {
    position: relative;
    width: 100%;
    height: 200px; 
    overflow: hidden;
}

.image-gallery-container img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    display: block;
    /* Rendu plus doux pour l'effet de "glissement" */
    transition: opacity 0.3s ease-in-out; 
    border-top-left-radius: 10px;
    border-top-right-radius: 10px;
}

/* Les styles .card img ne sont plus nécessaires car tout utilise .image-gallery-container img */

.gallery-nav {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0, 0, 0, 0.5);
    color: white;
    border: none;
    padding: 10px 15px;
    font-size: 18px;
    cursor: pointer;
    z-index: 10;
    transition: background 0.2s;
    border-radius: 4px;
}

.gallery-nav.prev {
    left: 10px;
}

.gallery-nav.next {
    right: 10px;
}

.gallery-nav:hover {
    background: rgba(0, 0, 0, 0.8);
}

/* NOUVEAU: Masque les boutons de navigation pour les images uniques */
.gallery-nav.hidden {
    display: none;
}

.gallery-indicators {
    position: absolute;
    bottom: 10px;
    left: 0;
    right: 0;
    text-align: center;
    z-index: 15;
}

.indicator {
    display: inline-block;
    width: 8px;
    height: 8px;
    background-color: rgba(255, 255, 255, 0.7);
    border-radius: 50%;
    margin: 0 4px;
    transition: background-color 0.2s, transform 0.2s;
}

.indicator.active {
    background-color: #007bff;
    transform: scale(1.2);
}
/* Fin des styles de l'album photo */


.card-content {
    padding: 20px;
}

.card-content h3 {
    margin-top: 0;
    color: #007bff;
    font-size: 18px;
}

.card-content p {
    margin: 5px 0;
    font-size: 14px;
    color: #555;
}

.price {
    font-size: 20px;
    font-weight: bold;
    color: #28a745;
    margin-top: 10px;
    margin-bottom: 15px; /* Ajout d'une marge pour séparer du bouton */
}

/* Style général des boutons (utilisé pour les boutons disabled) */
button {
  margin-top: 10px;
  padding: 10px 15px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  background-color: #007bff;
  color: white;
  font-size: 14px;
  transition: background 0.3s, transform 0.1s;
}

/* Style pour un bouton désactivé qui utilise le même texte 'Réserver via WhatsApp' */
button:disabled {
  background-color: #ccc; /* Couleur grise pour indiquer qu'il est désactivé */
  cursor: not-allowed;
  box-shadow: none;
  opacity: 0.7; 
}

button:hover:not(:disabled) {
  background-color: #0056b3;
}

button:active:not(:disabled) {
  transform: scale(0.98);
}

/* Style spécifique pour le bouton WhatsApp dans les annonces */
.whatsapp-listing-btn {
    margin-top: 15px;
    padding: 12px 15px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    background-color: #25D366; /* Vert WhatsApp */
    color: white;
    font-size: 16px;
    font-weight: bold;
    width: 100%; /* Full width button */
    box-shadow: 0 4px 8px rgba(37, 211, 102, 0.4);
    transition: background 0.3s, transform 0.1s;
}

.whatsapp-listing-btn:hover:not(:disabled) {
    background-color: #1DA851;
}

.whatsapp-listing-btn:active:not(:disabled) {
    transform: scale(0.99);
}

/* Styles spécifiques pour la section Découverte de Bouaké */
.discovery-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    margin-top: 20px;
}

.discovery-card {
    background-color: #f8f8f8;
    border: 1px solid #ddd;
    border-radius: 8px;
    text-align: center;
    padding: 15px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
}

.discovery-card h3 {
    color: #ff7f50; /* Couleur secondaire */
    margin-top: 0;
}

/* Style for practical info sections */
.practical-info {
    margin-top: 20px;
    padding-top: 15px;
    /* La bordure est retirée car cette section est maintenant en bas de la page d'accueil */
}

.footer {
    background-color: #2c3e50;
    color: white;
    text-align: center;
    padding: 20px;
    margin-top: 30px;
    border-top-left-radius: 8px;
    border-top-right-radius: 8px;
}

@media (max-width: 768px) {
  .main {
    padding: 15px;
  }
  .filters {
    grid-template-columns: 1fr;
  }
  .nav a {
      flex-grow: 1;
      text-align: center;
      padding: 10px 10px;
      font-size: 14px;
  }
  .whatsapp-listing-btn {
    font-size: 14px;
    padding: 10px 15px;
  }
}
</style>
</head>
<body>

<div class="header">
  <h1>Gbêkê Booking - Bouaké</h1>
</div>

<div class="nav">
  <!-- Liens de navigation mis à jour pour utiliser la fonction navigateTo -->
  <a id="nav-home" onclick="navigateTo('home', 'all')" class="active">Accueil</a>
  <!-- NOUVEAU: Résidences Meublées (anciennement Locations) -->
  <a id="nav-residences" onclick="navigateTo('home', 'Résidence Meublée')">Résidences Meublées</a>
  <!-- NOUVEAU: Salles Événementielles -->
  <a id="nav-salles" onclick="navigateTo('home', 'Salle Événementielle')">Salles Événementielles</a>
  <a id="nav-hotels" onclick="navigateTo('home', 'Hôtel')">Hôtels</a>
  <!-- NOM CHANGÉ: Événements Publics (anciennement Espace Événementiel) -->
  <a id="nav-events" onclick="navigateTo('home', 'Événement Public')">Événements Publics</a>
  <a id="nav-bouake" onclick="navigateTo('bouake')">Découvrir Bouaké</a>
</div>

<div class="main">

  <!-- CONTENEUR PRINCIPAL POUR LES ANNONCES ET LES FILTRES (PAGE D'ACCUEIL) -->
  <div id="content-home">
    <div class="section" id="accueil">
      <h2>Bienvenue</h2>
      <p>Utilisez les filtres ci-dessous pour trouver rapidement le bien idéal à Bouaké : résidence meublée, salle à louer, chambre d'hôtel ou événement public.</p>
    </div>
    
    <div class="section">
      <h2>Filtres de Recherche</h2>
      <div class="filters">
        <!-- Filtre Type de Bien (MIS À JOUR) -->
        <div class="filter-group">
          <label for="propertyType">Type de Bien :</label>
          <select id="propertyType" onchange="applyFilters()">
            <option value="">Tous Types (Résidence, Salle, Hôtel)</option>
            <option value="Résidence Meublée">Résidence Meublée</option>
            <option value="Salle Événementielle">Salle Événementielle</option>
            <option value="Hôtel">Hôtel</option>
            <option value="Événement Public">Événement Public</option>
          </select>
        </div>

        <!-- Filtre Quartier -->
        <div class="filter-group">
          <label for="district">Quartier :</label>
          <select id="district" onchange="applyFilters()">
            <option value="">Tous les quartiers</option>
            <option value="Koko">Koko</option>
            <option value="N'Gattakro">N'Gattakro</option>
            <option value="Air France">Air France</option>
          </select>
        </div>

        <!-- Filtre Chambres/Capacité -->
        <div class="filter-group">
          <label for="capacity">Min. Chambres/Capacité :</label>
          <input type="number" id="capacity" min="1" value="1" onchange="applyFilters()">
        </div>

        <!-- Filtre Prix Max -->
        <div class="filter-group">
          <label for="maxPrice">Prix Max (F CFA) :</label>
          <input type="number" id="maxPrice" value="500000" onchange="applyFilters()">
        </div>

      </div>
    </div>

    <div class="section">
      <h2>Annonces Disponibles</h2>
      <div id="listings">
        <!-- Les annonces seront injectées ici par JavaScript -->
      </div>
    </div>

    <!-- NOUVEL EMPLACEMENT DE CONTACT ET RÉSERVATIONS -->
    <div class="section">
      <div class="practical-info">
        <h3 style="color: #007bff;">Contact & Réservations</h3>
        <p>Pour réserver un bien ou pour toute question spéciale, veuillez utiliser notre ligne WhatsApp dédiée :</p>
        <div style="display: flex; gap: 10px; margin-bottom: 15px; flex-wrap: wrap;">
          <span style="background-color: #25D366; color: white; padding: 8px 15px; border-radius: 6px; font-weight: 500;">Numéro WhatsApp : +225 07 88 03 35 35</span>
        </div>

        <p><strong>Email :</strong> contact@gbekebooking.ci</p>
        <p><strong>Adresse :</strong> Quartier XYZ, Bouaké, Côte d'Ivoire</p>
      </div>
    </div>
  </div> 
  <!-- FIN CONTENEUR content-home -->

  <!-- CONTENEUR POUR LA PAGE "DÉCOUVRIR BOUAKÉ", initialement masqué -->
  <div id="content-bouake" style="display: none;">
    <div class="section">
      <h2>Découvrir Bouaké et Infos Pratiques</h2>
      <p>Bouaké, la deuxième ville de Côte d'Ivoire, est un centre économique et culturel vibrant. Voici quelques points d'intérêt majeurs à proximité de nos logements :</p>

      <!-- Points d'Intérêt -->
      <div class="discovery-grid">
        <div class="discovery-card">
          <h3>Le Grand Marché</h3>
          <p>Cœur de l'activité commerciale. Idéal pour trouver des produits locaux, artisanat et tissus.</p>
        </div>
        <div class="discovery-card">
          <h3>Université Alassane Ouattara</h3>
          <p>Un pôle académique majeur, souvent un point de repère important pour les transports.</p>
        </div>
        <div class="discovery-card">
          <h3>Cathédrale Sainte-Thérèse</h3>
          <p>Un magnifique édifice religieux et un lieu de calme au milieu de l'agitation de la ville.</p>
        </div>
      </div>
    </div>
  </div>
  <!-- FIN CONTENEUR content-bouake -->
</div>

<div class="footer">
  <p>&copy; 2025 Gbêkê Booking. Tous droits réservés.</p>
</div>

<script>
  // Nouvelle map globale pour suivre l'index de l'image actuelle par annonce
  const imageIndexMap = {};

  // Liste de toutes les annonces, avec les types mis à jour : Résidence Meublée, Salle Événementielle, Hôtel, Événement Public
  const allListings = [
    {
      id: 1, type: "Résidence Meublée", title: "Appartement Luxueux à Koko", district: "Koko", rooms: 3, capacity: 3, price: 150000, 
      images: ["https://placehold.co/400x200/4CAF50/white?text=Résidence+Koko"], // Image unique
      available: true, description: "Bel appartement de 3 chambres, cuisine équipée, dans un quartier calme et sécurisé.", period: "mois"
    },
    {
      id: 2, type: "Résidence Meublée", title: "Studio Meublé N'Gattakro", district: "N'Gattakro", rooms: 1, capacity: 1, price: 50000,
      images: ["https://placehold.co/400x200/2196F3/white?text=Studio+Meublé"], // Image unique
      // CHANGÉ : Mis à disponible (true) pour que le bouton soit actif par défaut.
      available: true, description: "Petit studio idéal pour étudiant ou célibataire. Proche des commodités.", period: "mois"
    },
    // Salle Événementielle réintégrée
    {
      id: 3, type: "Salle Événementielle", title: "Salle de Fête 'Le Diamant'", district: "Air France", rooms: 0, capacity: 150, price: 300000,
      images: ["https://placehold.co/400x200/FF0000/white?text=Salle+Diamant+Air+France"],
      available: true, description: "Grande salle moderne avec climatisation, idéale pour mariages, conférences et soirées privées (Capacité 150 personnes).", period: "jour"
    },
    
    // Hôtel 4 (ALBUM)
    {
      id: 4, type: "Hôtel", title: "Chambre Double Standard Koko Hôtel", district: "Koko", rooms: 1, capacity: 2, price: 25000,
      images: [ // ALBUM IMAGES
          "https://placehold.co/400x200/9C27B0/white?text=Chambre+Standard",
          "https://placehold.co/400x200/6A1B9A/white?text=Salle+de+Bain+Moderne",
          "https://placehold.co/400x200/E91E63/white?text=Vue+Exterieure+Hotel"
      ],
      available: true, description: "Chambre d'hôtel confortable avec lit double, petit-déjeuner inclus et Wi-Fi.", period: "nuit"
    },
    {
      id: 5, type: "Résidence Meublée", title: "Villa 5 pièces Air France", district: "Air France", rooms: 5, capacity: 5, price: 450000,
      images: ["https://placehold.co/400x200/FFC107/black?text=Villa+5+Pieces"], // Image unique
      available: true, description: "Magnifique villa familiale avec jardin et piscine, quartier résidentiel sécurisé.", period: "mois"
    },
    // Hôtel 6 (ALBUM)
    {
      id: 6, type: "Hôtel", title: "Suite VIP Air France Hotel", district: "Air France", rooms: 1, capacity: 2, price: 60000,
      images: [
          "https://placehold.co/400x200/FFD700/black?text=Suite+VIP+Salon",
          "https://placehold.co/400x200/FF8C00/black?text=Suite+VIP+Chambre",
          "https://placehold.co/400x200/4B0082/white?text=Piscine+Hotel"
      ],
      available: true, description: "Suite de luxe avec salon privé et service en chambre 24/7.", period: "nuit"
    },
    // Événement Public Festival
    {
      id: 7, type: "Événement Public", title: "Festival des Arts de Bouaké 2025", district: "Koko", rooms: 0, capacity: 5000, price: 10000,
      images: ["https://placehold.co/400x200/8A2BE2/white?text=Festival+Arts+2025"], 
      available: true, description: "Grand festival annuel célébrant la musique, la danse et l'artisanat local. Lieu : Esplanade de Koko. Date: 15-17 Mars 2025.", period: "billet"
    },
    // Événement Public Soirée Gala
    {
      id: 8, type: "Événement Public", title: "Grande Soirée Gala de la Jeunesse", district: "N'Gattakro", rooms: 0, capacity: 300, price: 50000,
      images: ["https://placehold.co/400x200/FF1493/white?text=Soiree+Gala"], 
      available: true, description: "Événement de prestige avec dîner et spectacles. Tenue de soirée exigée. Date : 31 Décembre 2025.", period: "couvert"
    }
  ];

  const whatsappNumber = "2250788033535"; // Numéro sans le '+'
  const whatsappUrlBase = "https://wa.me/";


  // --- LOGIQUE DE L'ALBUM PHOTO (CAROUSEL) ---

  // Génère le HTML pour l'affichage de l'image (MAINTENANT TOUJOURS UNE GALERIE)
  function renderImageGallery(listingId, images, type) {
    if (!images || images.length === 0) {
        // Fallback pour le cas où il n'y a pas d'image du tout. On utilise la structure galerie.
        images = ["https://placehold.co/400x200/000000/white?text=Image+Non+Disponible"];
    }

    // Initialise l'index
    if (imageIndexMap[listingId] === undefined) {
        imageIndexMap[listingId] = 0;
    }

    const initialImage = images[0];
    const isSingleImage = images.length <= 1; // Vérifie si on doit masquer les contrôles
    const errorText = type.replace(/ /g, '+'); 
    const hiddenClass = isSingleImage ? 'hidden' : ''; // Classe pour masquer les contrôles

    // HTML pour l'album photo interactif (carrousel) - TOUJOURS UTILISÉ
    return `
        <div class="image-gallery-container">
            <img id="gallery-img-${listingId}" 
                 src="${initialImage}" 
                 alt="Album photo ${type}" 
                 onerror="this.onerror=null; this.src='https://placehold.co/400x200/007bff/white?text=${errorText}'" 
            />
            
            <button class="gallery-nav prev ${hiddenClass}" onclick="prevImage(${listingId})">&lt;</button>
            <button class="gallery-nav next ${hiddenClass}" onclick="nextImage(${listingId})">&gt;</button>
            
            <div id="gallery-indicators-${listingId}" class="gallery-indicators">
                ${images.map((_, index) => 
                    // Ajoute la classe 'active' au premier indicateur
                    `<span class="indicator ${index === 0 ? 'active' : ''}"></span>`
                ).join('')}
            </div>
        </div>
    `;
  }

  // Met à jour l'image et les indicateurs du carrousel dans le DOM
  function updateGalleryDisplay(listingId, newIndex) {
      const images = allListings.find(l => l.id === listingId).images;
      const imgElement = document.getElementById(`gallery-img-${listingId}`);
      const indicatorsContainer = document.getElementById(`gallery-indicators-${listingId}`);
      
      if (imgElement && images && indicatorsContainer) {
          // Mise à jour de l'image
          imgElement.src = images[newIndex];
          
          // Mise à jour des indicateurs (points)
          Array.from(indicatorsContainer.children).forEach((indicator, index) => {
              if (index === newIndex) {
                  indicator.classList.add('active');
              } else {
                  indicator.classList.remove('active');
              }
          });
      }
  }

  function nextImage(listingId) {
      const images = allListings.find(l => l.id === listingId).images;
      if (!images) return;
      
      const current = imageIndexMap[listingId] === undefined ? 0 : imageIndexMap[listingId];
      // Calcul du nouvel index (boucle vers le début)
      let newIndex = (current + 1) % images.length;
      imageIndexMap[listingId] = newIndex;
      updateGalleryDisplay(listingId, newIndex);
  }

  function prevImage(listingId) {
      const images = allListings.find(l => l.id === listingId).images;
      if (!images) return;
      
      const current = imageIndexMap[listingId] === undefined ? 0 : imageIndexMap[listingId];
      // Calcul du nouvel index (boucle vers la fin)
      let newIndex = (current - 1 + images.length) % images.length;
      imageIndexMap[listingId] = newIndex;
      updateGalleryDisplay(listingId, newIndex);
  }
  // --- FIN LOGIQUE ALBUM PHOTO ---

  // Fonction de rendu d'une carte d'annonce
  function renderListing(listing) {
    // Détermination si le bien utilise la Capacité (Salles, Événements Publics) ou les Chambres
    const usesCapacity = (listing.type === 'Salle Événementielle' || listing.type === 'Événement Public');
    const capacityLabel = usesCapacity ? 'Capacité' : 'Chambres';
    const capacityValue = usesCapacity ? `${listing.capacity} pers.` : `${listing.rooms}`;

    // Utilisation de la fonction de rendu de la galerie/image
    const imageContent = renderImageGallery(listing.id, listing.images, listing.type);

    let priceDetails = `${listing.price.toLocaleString('fr-FR')} F CFA / ${listing.period}`;
    
    // Détermine si le bouton doit être désactivé
    const isDisabled = !listing.available ? 'disabled' : '';
    // Détermine l'action (seulement s'il n'est pas désactivé)
    const onClickAction = listing.available ? `onclick="bookViaWhatsApp(${listing.id})"` : '';
    
    // Le bouton est TOUJOURS rendu, mais sa couleur et son interactivité dépendent de 'available'
    return `
      <div class="card" data-id="${listing.id}" data-type="${listing.type}">
        ${imageContent}
        <div class="card-content">
          <h3>${listing.title}</h3>
          <p><strong>Type:</strong> ${listing.type}</p>
          <p><strong>Quartier:</strong> ${listing.district}</p>
          <p><strong>${capacityLabel}:</strong> ${capacityValue}</p>
          <p>${listing.description}</p>
          <div class="price">${priceDetails}</div>
          
          <!-- Bouton unique, désactivé si indisponible -->
          <button class="whatsapp-listing-btn" ${isDisabled} ${onClickAction}>
            Réserver via WhatsApp
          </button>
        </div>
      </div>
    `;
  }

  // Fonction pour afficher les annonces filtrées
  function displayListings(listings) {
    const listingsContainer = document.getElementById('listings');
    listingsContainer.innerHTML = listings.map(renderListing).join('');

    if (listings.length === 0) {
      listingsContainer.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; color: #6c757d;">Aucune annonce ne correspond à vos critères de recherche.</p>';
    }
  }

  // Fonction de filtrage des annonces
  function applyFilters(propertyTypeFilter) {
    // Si un type est passé (par la nav), on met à jour le filtre Select
    const propertyTypeSelect = document.getElementById('propertyType');
    if (propertyTypeFilter && propertyTypeFilter !== 'all') {
      propertyTypeSelect.value = propertyTypeFilter;
    } else {
      // Si on est sur 'all' (Accueil), on s'assure que le filtre Type de Bien est 'Tous Types'
      propertyTypeSelect.value = "";
    }
    
    // Récupération des valeurs actuelles des filtres
    const selectedType = propertyTypeSelect.value;
    const districtFilter = document.getElementById('district').value;
    const capacityFilter = parseInt(document.getElementById('capacity').value) || 1;
    const maxPriceFilter = parseInt(document.getElementById('maxPrice').value) || Infinity;

    const filteredListings = allListings.filter(listing => {
      // 1. Filtre par Type de Bien
      let matchesType = true;
      
      if (!selectedType) {
         // Si 'Accueil' est sélectionné (type vide), on exclut uniquement les Événements Publics 
         // car ils ne sont pas des biens à louer/réserver comme les autres par défaut.
         if (listing.type === "Événement Public") {
             matchesType = false;
         }
      } else {
        // Si un type spécifique est sélectionné (clic sur la nav Résidences, Hôtels, etc.)
        matchesType = listing.type === selectedType;
      }

      // 2. Filtre par Quartier
      const matchesDistrict = !districtFilter || listing.district === districtFilter;

      // 3. Filtre par Chambres/Capacité
      const capacityToCheck = (listing.type === 'Salle Événementielle' || listing.type === 'Événement Public') ? listing.capacity : listing.rooms;
      const matchesCapacity = capacityToCheck >= capacityFilter;
      
      // 4. Filtre par Prix Max
      const matchesPrice = listing.price <= maxPriceFilter;

      return matchesType && matchesDistrict && matchesCapacity && matchesPrice;
    });

    displayListings(filteredListings);
  }

  // Nouvelle fonction pour la navigation entre les vues 
  function navigateTo(viewId, filterType = null) {
    const homeContent = document.getElementById('content-home');
    const bouakeContent = document.getElementById('content-bouake');
    const navLinks = document.querySelectorAll('.nav a');

    // Réinitialise la classe active sur tous les liens
    navLinks.forEach(link => link.classList.remove('active'));

    if (viewId === 'home') {
      // Afficher la page d'accueil (annonces)
      bouakeContent.style.display = 'none';
      homeContent.style.display = 'block';

      // Appliquer les filtres spécifiques
      applyFilters(filterType);

      // Mettre en évidence le lien de navigation correct
      if (filterType === 'Résidence Meublée') document.getElementById('nav-residences').classList.add('active'); 
      else if (filterType === 'Salle Événementielle') document.getElementById('nav-salles').classList.add('active'); 
      else if (filterType === 'Hôtel') document.getElementById('nav-hotels').classList.add('active');
      else if (filterType === 'Événement Public') document.getElementById('nav-events').classList.add('active');
      else document.getElementById('nav-home').classList.add('active');
      
      // Assurer que le scroll est en haut de la page (pour la sensation de changement de page)
      window.scrollTo({ top: 0, behavior: 'smooth' });

    } else if (viewId === 'bouake') {
      // Afficher la page Découvrir Bouaké
      homeContent.style.display = 'none';
      bouakeContent.style.display = 'block';
      document.getElementById('nav-bouake').classList.add('active');
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  }

  // Fonction pour la réservation directe via WhatsApp (inchangée)
  function bookViaWhatsApp(id) {
    const selectedItem = allListings.find(item => item.id === id);
    if (!selectedItem) {
      console.error('Erreur: Article non trouvé pour la réservation.');
      return;
    }

    // Construction du message WhatsApp avec les détails de la réservation
    const message = encodeURIComponent(
        `Bonjour, je souhaite réserver le bien suivant : ${selectedItem.title} ` +
        `(${selectedItem.type} situé à ${selectedItem.district}). ` +
        `Prix estimé : ${selectedItem.price.toLocaleString('fr-FR')} F CFA / ${selectedItem.period}. ` +
        `Veuillez confirmer la disponibilité et les détails de ma réservation.`
    );
    
    // Construction de l'URL complète de redirection
    const whatsappLink = `${whatsappUrlBase}${whatsappNumber}?text=${message}`;

    // Redirection vers WhatsApp
    window.open(whatsappLink, '_blank');
  }


  // Initialisation au chargement de la page
  window.onload = function() {
    // Au chargement, on navigue vers l'accueil pour appliquer les filtres initiaux
    navigateTo('home', 'all'); 
  };
</script>

</body>
</html>